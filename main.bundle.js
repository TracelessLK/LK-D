module.exports=function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(n){return e[n]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=1)}([function(e){e.exports=require("electron")},function(e,n,t){function o(){(S=new u({width:1024,height:768})).loadURL(f.format({pathname:p.join(__dirname,_+"/index/loading.html"),protocol:"file:",slashes:!0})),global.mainWindow=S,global.appVersion=y.version,v.register("Control+Alt+I",()=>{S.webContents.openDevTools()}),s(function(e){e?S.loadURL(f.format({pathname:p.join(__dirname,_+"/index/update.html"),protocol:"file:",slashes:!0})):S.loadURL(f.format({pathname:p.join(__dirname,_+"/index/index.html"),protocol:"file:",slashes:!0}))}),S.on("closed",function(){S=null}),S.on("focus",function(){S.webContents.send("mainWindow-focus")})}function r(){j||(j=new u({frame:!1,modal:!0,transparent:!0,show:!1,width:0,height:0,alwaysOnTop:!0})).on("closed",function(){j=null}),j.loadURL(f.format({pathname:p.join(__dirname,_+"/recent/showCapture.html"),protocol:"file:",slashes:!0}))}function i(e,n){for(var t=e.split("."),o=n.split("."),r=0;3>r;r++){var i=parseInt(t[r]),s=parseInt(o[r]);if(i>s)return 1;if(i!=s)return-1}return 0}function s(e){let n=g.request("https://raw.githubusercontent.com/tracelessman/LK-D/publish/upgrade.json");n.on("response",n=>{let t="";200==n.statusCode?(n.on("data",e=>{t+=e}),n.on("end",()=>{let n=JSON.parse(t);if(1==i(L=n.version,y.version)){k=!0,e(!0);let t=n.changeList;q=["package.json"];for(var o,r=0;r<t.length;r++)if(1==i((o=t[r]).version,y.version)){o.files.forEach(function(e){-1==q.indexOf(e)&&q.push(e)})}}else e(!1)})):(e(!1),console.info("check update response.statusCode:"+n.statusCode))}),n.on("error",function(n){e(!1),console.info(n.toString())}),n.end()}function a(e){function n(e,n){O.set(e,n),global.upgradeMessage=function(){var e="";return O.forEach(function(n,t){e+=t+"---------------------"+n+"<br>"}),e}(),S.webContents.executeJavaScript("update()")}function t(e){if(m.existsSync(e)){m.readdirSync(e).forEach(function(n){var o=p.join(e,n);m.statSync(o).isDirectory()&&!o.endsWith(".asar")?t(o):m.unlinkSync(o)});try{m.rmdirSync(e)}catch(n){m.readdirSync(e).forEach(function(e){b.showMessageBox({message:e})})}}}var o="https://raw.githubusercontent.com/tracelessman/LK-D/publish/",r=o.length,i=0,s=0,a=p.join(__dirname,"_tmp");t(a),S.webContents.session.on("will-download",(o,l)=>{var c=l.getURL().substring(r);l.setSavePath(p.join(a,c)),l.on("updated",(e,t)=>{"interrupted"===t?(n(c,"interrupted"),l.canResume()?l.resume():n(c,"interrupted and can't resume")):"progressing"===t&&(l.isPaused()?n(c,"paused"):n(c,Math.round(l.getReceivedBytes()/l.getTotalBytes()*100)+"%"))}),l.once("done",(o,r)=>{if(i++,"completed"===r?(s++,n(c,"100%")):n(c,`Download failed: ${r}`),i==e.length){if(s==i){var l=__dirname;(function(){const e=1===parseInt(process.env.ELECTRON_IS_DEV,10);return"ELECTRON_IS_DEV"in process.env?e:process.defaultApp||/node_modules[\\\/]electron[\\\/]/.test(process.execPath)})()&&(l=p.join(__dirname,"_tmp2"),!m.existsSync(l)&&m.mkdirSync(l)),function e(n,t){m.readdirSync(n).forEach(function(o){var r=p.join(n,o),i=p.join(t,o);m.statSync(r).isDirectory()?r.endsWith(".asar")?w.writeFileSync(i,w.readFileSync(r)):(!m.existsSync(i)&&m.mkdirSync(i),e(r,i)):m.renameSync(r,i)})}(a,l),t(a)}S.webContents.executeJavaScript("complete()")}})}),e.forEach(function(e){n(e,"downloading"),S.webContents.downloadURL(o+e)}),0==e.length&&S.webContents.executeJavaScript("complete()")}const l=t(0),c=l.app,u=l.BrowserWindow,d=t(0).ipcMain,p=t(2),f=t(3),m=t(4),h=t(0).nativeImage,g=l.net,b=l.dialog,w=t(5),v=l.globalShortcut,_="",y=t(6);let S,x,j;if(c.on("ready",o),c.on("ready",()=>{v.register("Control+Alt+A",()=>{j||r()})}),c.on("will-quit",()=>{v.unregisterAll()}),c.on("window-all-closed",function(){"darwin"!==process.platform&&c.quit()}),c.on("activate",function(){null===S&&o()}),d.on("openFileDialog",function(e){var n=b.showOpenDialog({properties:["openFile"]});n&&0<n.length&&m.readFile(n[0],function(t,o){if(o){var r=o.toJSON().data,i=n[0].split(/[\\|\/]/gi);e.sender.send("openFileDialog-response",{data:r,name:i[i.length-1]})}})}),d.on("openImageBrowser",function(e,n){global.imageHtml=n.html,x||(x=new u).on("closed",function(){x=null}),x.loadURL(f.format({pathname:p.join(__dirname,_+"/recent/showImage.html"),protocol:"file:",slashes:!0})),x.setSize(n.width+100,n.height+100),x.center(),x.setAlwaysOnTop(!1),x.show()}),d.on("openCaptureBrowser",function(){r()}),d.on("showCaptureBrowser",function(){j.setFullScreen(!0),j.show()}),d.on("closeCaptureBrowser",function(e,n){j&&(j.minimize(),j.close(),j=null,n&&S.webContents.send("capture-complete"))}),c.dock){var C=h.createFromPath(p.join(__dirname,"/images/traceless.png"));c.dock.setIcon(C)}d.on("messageReceive",function(e,n){c.dock&&n.total&&c.dock.setBadge(n.total+"")}),d.on("messageRead",function(e,n){c.dock&&(n.total?c.dock.setBadge(n.total+""):c.dock.setBadge(""))});let L,k=!1,q=[];d.on("remoteVersion-request",function(e){s(function(){e.sender.send("remoteVersion-response",L||y.version)})}),d.on("upgrade-request",function(e,n){s(function(e){e?S.loadURL(f.format({pathname:p.join(__dirname,_+"/index/update.html"),protocol:"file:",slashes:!0})):!1!==n.toIndexIFNot&&S.loadURL(f.format({pathname:p.join(__dirname,_+"/index/index.html"),protocol:"file:",slashes:!0}))})});let O=new Map;d.on("start-download",function(){a(q)}),d.on("restart",function(){c.relaunch(),c.exit(0)})},function(e){e.exports=require("path")},function(e){e.exports=require("url")},function(e){e.exports=require("fs")},function(e){e.exports=require("original-fs")},function(e){e.exports={name:"LK",version:"0.0.3",main:"./main.js",scripts:{start:"cross-env NODE_ENV=development electron ./main.js",build:"node build.js",publish:"node build.js && electron .",asars:"cd node_modules/sqlite3 && npm i && cd ../../&& asar pack node_modules/sqlite3 asars/sqlite3.asar",postinstall:"node bin/postinstall","install:sqlite3":"node bin/installSqlite3",updateC:"rm -rf node_modules/@lk && npm i",updateC2:"npm i github:tracelessman/LK-C && node bin/postInstall"},devDependencies:{"@ys/eslint-config-strict":"github:spirit1453/codebase#strict_eslint",asar:"^0.14.2","babel-loader":"^7.1.3","babili-webpack-plugin":"^0.1.2","cross-env":"^5.2.0",del:"^3.0.0",electron:"3.0.7",webpack:"^4.0.1"},dependencies:{"@lk/LK-C":"github:tracelessman/LK-C","@ys/collection":"github:spirit1453/node_collection#publish","crypto-js":"^3.1.9-1",lodash:"4.17.11","qr-image":"^3.2.0","react-native-rsa":"0.0.3",sqlite3:"^4.0.4",uuid:"^3.2.1",ws:"^4.0.0"}}}]);